{% extends 'backups/base.html' %}

{% block content %}
	<div class="container">
		<section class="span-24 last">
			<h1>{{ object.client.hostname }} ({{ object.started_at }})</h1>
			<div class="content clearfix">
				<h2>Summary</h2>
				<div class="object-summary backup-result-summary">
					<dl class="clearfix">
						<dt>Client:</dt>
						<dd><a href="{{ object.client.get_absolute_url }}">{{ object.client.hostname }}</a></dd>
						
						<dt>Status:</dt>
						<dd><span class="{{ object.get_status }}">{{ object.get_status|capfirst }}</a></dd>
						
						<dt>UUID:</dt>
						<dd><code>{{ object.uuid }}</code></dd>
						
						<dt>Started:</dt>
						<dd>{{ object.started_at }}</dd>
						
						<dt>Finished:</dt>
						<dd>{{ object.finished_at }}</dd>
						
						<dt>Duration:</dt>
						<dd>{{ object.started_at|timesince:object.finished_at }}</dd>
					</dl>
				</div>
				<hr />
				<h2>Changed Files</h2>
				<table class="object_list backedup_file_list">
					<thead>
						<tr>
							<th class="icon"></th><th>Path</th><th>Size</th>
						</tr>
					</thead>
					<tbody>
						{% if object.files.all %}
							{% for file in object.files.all %}
								<tr>
									<td class="icon"><img src="{{ STATIC_URL }}img/icons/famfamfam/{% if file.action == 'added' %}page_add.png{% else %}{% if file.action == 'deleted' %}page_delete.png{% endif %}{% endif %}" /></td>
									<td class="path">{{ file.path }}</td>
									<td class="size">{{ file.size|filesizeformat }}</td>
								</tr>
							{% endfor %}
						{% else %}
							<tr class="info">
								<td colspan="6">
									No files were changed.
								</td>
							</tr>
						{% endif %}
					</tbody>
				</table>
			</div>
		</section>
	</div>
{% endblock %}
